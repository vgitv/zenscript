#!/bin/bash
set -euo pipefail

# Script d'installation des programmes principaux suite Ã  l'installation d'ubuntu

function try {
    local action='retry'

    echo '# --------------------------------'
    echo "# $*"

    while [[ "${action}" = 'retry' ]]; do
        if "$@"; then
            echo 'OK'
        else
            echo "ERREUR"
            echo 'Continue ? ( retry / skip )'
            read -r action
            while [[ ! "${action}" =~ (retry|skip) ]]; do
                echo 'Wrong choice ( retry / skip )'
                read -r action
            done
        fi
    done
    echo
}

try sudo apt-get -y install git
try sudo apt-get -y install vim-gnome
try sudo apt-get -y install zsh
try sudo apt-get -y install tmux
try sudo apt-get -y install htop
try sudo apt-get -y install ranger

try sudo chsh -s /bin/zsh

try git clone https://github.com/vgitv/.opt ~/.opt
# appel ~/.opt/bin/bareconfig
