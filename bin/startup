#!/bin/bash
set -euo pipefail

# Script en mode interactif d'installation des programmes principaux suite Ã 
# l'installation d'ubuntu

function try {
    local action='retry'

    echo '# --------------------------------'
    echo "# $*"

    while [[ "${action}" = 'retry' ]]; do
        if "$@"; then
            echo 'OK'
        else
            echo "ERREUR"
            echo 'Continue ? ( retry / skip )'
            read -r action
            while [[ ! "${action}" =~ (retry|skip) ]]; do
                echo 'Wrong choice ( retry / skip )'
                read -r action
            done
        fi
    done
    echo
}

# package installation
try sudo apt-get -y install git
try sudo apt-get -y install vim-gnome
try sudo apt-get -y install zsh
try sudo apt-get -y install tmux
try sudo apt-get -y install htop
try sudo apt-get -y install ranger
try sudo apt-get -y install build-essential
try sudo apt-get -y install firefox
# to to: nvim, alacritty

# settings
try sudo chsh -s /bin/zsh

# usefull repo
try ~/.opt/bin/bareconfig
curl -LSso ~/.config/nvim/autoload/pathogen.vim https://tpo.pe/pathogen.vim
git clone https://github.com/morhetz/gruvbox.git ~/.config/nvim/bundle/gruvbox
git clone https://github.com/preservim/nerdtree.git ~/.config/nvim/bundle/nerdtree

mkdir -p ~/Code
try git clone https://github.com/vgitv/st-vfork ~/Code/st-vfork
try git clone https://github.com/vgitv/dwm-vfork ~/Code dwm-vfork
